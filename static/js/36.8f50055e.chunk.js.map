{"version":3,"sources":["Loading.js","../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","views/CoronaGraph/CoronaGraph.js"],"names":["Loading","_jsx","className","children","CSpinner","color","size","_extends","module","exports","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","__esModule","apply","_taggedTemplateLiteral","slice","freeze","defineProperties","raw","value","indexOf","types_of_data","graphScales","graphTypes","graphModes","COLORS","CoronaGraph","Component","constructor","props","super","cleanDataForPlotting","type_of_data","plotDatas","count","this","state","selectedCountries","forEach","selectedCountry","x","y","rawData","data","push","date","type","graphType","mode","graphMode","marker","name","concat","plotDataForSelectedCountries","setState","isLoaded","setTimeout","dataForPlot_new_cases","dataForPlot_new_deaths","dataForPlot_total_cases","dataForPlot_total_deaths","isLocationDataLoaded","isCoronaDataLoaded","graphScale","countriesData","componentDidMount","fetch","then","res","json","result","country","i","_objectSpread","label","error","console","log","render","FILE_NAME","width","window","innerWidth","height","innerHeight","_jsxs","Select","isMulti","isClearable","onChange","options","Button","onClick","Plot","showlegend","layout","title","yaxis"],"mappings":"6KAAA,0BAQeA,IALCA,IACZC,cAAA,OAAKC,UAAU,mCAAkCC,SAC7CF,cAACG,KAAQ,CAACC,MAAM,UAAUC,KAAK,Q,oBCLvC,SAASC,IACP,OAAOC,EAAOC,QAAUF,EAAWG,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAClF,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAIF,UAAUD,GAClB,IAAK,IAAII,KAAKD,GAAG,CAAG,GAAEE,eAAeC,KAAKH,EAAGC,KAAOL,EAAEK,GAAKD,EAAEC,GAC/D,CACA,OAAOL,CACT,EAAGL,EAAOC,QAAQY,YAAa,EAAMb,EAAOC,QAAiB,QAAID,EAAOC,QAASF,EAASe,MAAM,KAAMP,UACxG,CACAP,EAAOC,QAAUF,EAAUC,EAAOC,QAAQY,YAAa,EAAMb,EAAOC,QAAiB,QAAID,EAAOC,O,mCCThG,SAASc,EAAuBT,EAAGG,GACjC,OAAOA,IAAMA,EAAIH,EAAEU,MAAM,IAAKd,OAAOe,OAAOf,OAAOgB,iBAAiBZ,EAAG,CACrEa,IAAK,CACHC,MAAOlB,OAAOe,OAAOR,MAG3B,CANA,+B,oBCSAT,EAAOC,QATP,SAAuCS,EAAGJ,GACxC,GAAI,MAAQI,EAAG,MAAO,CAAC,EACvB,IAAID,EAAI,CAAC,EACT,IAAK,IAAIJ,KAAKK,EAAG,GAAI,CAAC,EAAEC,eAAeC,KAAKF,EAAGL,GAAI,CACjD,IAAK,IAAMC,EAAEe,QAAQhB,GAAI,SACzBI,EAAEJ,GAAKK,EAAEL,EACX,CACA,OAAOI,CACT,EACgDT,EAAOC,QAAQY,YAAa,EAAMb,EAAOC,QAAiB,QAAID,EAAOC,O,2HCerH,MAQMqB,EAAgB,CACpB,YACA,aACA,cACA,gBAGIC,EAAc,CAAE,MAAQ,UACxBC,EAAc,CAAE,UAAY,OAC5BC,EAAc,CAAE,QAAU,gBAAkB,WAE5CC,EAAS,CACb,MAAM,QAAQ,OAAO,UAAU,UAAU,QAAQ,UAInD,MAAMC,UAAoBC,YAExBC,YAAYC,GACVC,MAAMD,GAAO,KAwDfE,qBAAwBC,IACtB,IAAIC,EAAY,GACZC,EAAQ,EAwBZ,OAtBAC,KAAKC,MAAMC,kBAAkBC,QAAQC,IACnC,IAAIC,EAAI,GAAKC,EAAI,GAEWN,KAAKC,MAAMM,QAAQH,EAAgBpB,OAC3CwB,KAAKL,QAAQK,IAC/BH,EAAEI,KAAKD,EAAKE,MACZJ,EAAEG,KAAKD,EAAKX,MAGdC,EAAUW,KACR,CACEJ,EAAG,IAAKA,GACRC,EAAG,IAAKA,GACRK,KAAKX,KAAKC,MAAMW,UAChBC,KAAMb,KAAKC,MAAMa,UACjBC,OAAQ,CAACtD,MAAO6B,IAASS,IACzBiB,KAAK,GAADC,OAAKb,EAAgBY,KAAI,OAAAC,OAAMpB,OAMlCC,GACR,KAEDoB,6BAA+B,KACa,GAAvClB,KAAKC,MAAMC,kBAAkB9B,SAGhC4B,KAAKmB,SAAS,CAACC,UAAS,IACxBC,WAAW,KACTrB,KAAKmB,SAAS,CACZG,sBAAuBtB,KAAKJ,qBAAqBV,EAAc,IAC/DqC,uBAAwBvB,KAAKJ,qBAAqBV,EAAc,IAChEsC,wBAAyBxB,KAAKJ,qBAAqBV,EAAc,IACjEuC,yBAA0BzB,KAAKJ,qBAAqBV,EAAc,IAClEkC,UAAU,KAEZ,OAhGFpB,KAAKC,MAAQ,CACTyB,sBAAsB,EACtBC,oBAAoB,EACpBP,UAAU,EACVQ,WAAYzC,EAAY,GACxByB,UAAWxB,EAAW,GACtB0B,UAAWzB,EAAW,GACtBwC,cAAe,GACftB,QAAS,GACTL,kBAAmB,GACnBoB,sBAAuB,CAAC,EACxBC,uBAAwB,CAAC,EACzBC,wBAAyB,CAAC,EAC1BC,yBAA0B,CAAC,EAEjC,CAEAK,oBACIC,MA5Ce,2DA6CdC,KAAKC,GAAOA,EAAIC,QAChBF,KACIG,IAGG,IAAIN,EAAgB,GACpBM,EAAOhC,QAAS,CAACiC,EAAUC,KACzBR,EAAcpB,KAAI6B,YAAC,CAACtD,MAAOoD,EAAQ,WAAYG,MAAOH,EAAQpB,MAAUoB,MAE1EpC,KAAKmB,SAAS,CACZU,gBACAH,sBAAsB,KAG3Bc,IACCC,QAAQC,IAAI,UAAWF,KAI7BT,MAjEkB,0DAkEjBC,KAAKC,GAAOA,EAAIC,QAChBF,KACIG,IAEGnC,KAAKmB,SAAS,CACZZ,QAAS4B,EACTR,oBAAoB,KAGzBa,IACCC,QAAQC,IAAI,UAAWF,IAGjC,CAgDAG,SACEF,QAAQC,IAAKE,yCAAwC5C,KAAKC,OAC1D,MAAM4C,EAA4B,IAApBC,OAAOC,WACfC,EAA8B,IAArBF,OAAOG,YAEtB,OACGjD,KAAKC,MAAMyB,sBAAwB1B,KAAKC,MAAM0B,mBAC/CuB,eAAA,OAAA3F,SAAA,CACEF,cAAA,MAAAE,SAAI,sBACJF,cAAA,SAAM,iDAGNA,cAAC8F,IAAM,CACLC,SAAS,EACTC,aAAa,EACbC,SAAWpF,IAAM8B,KAAKmB,SAAS,CAACjB,kBAAoBhC,KACpDqF,QAASvD,KAAKC,MAAM4B,gBAEtBxE,cAAA,SACAA,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASzD,KAAKkB,6BAA6B3D,SAAC,uBAC9EF,cAAA,SAAMA,cAAA,SAGJ2C,KAAKC,MAAMmB,UACV8B,eAAA,OAAA3F,SAAA,CACC2F,eAAA,QAAA3F,SAAA,CACEF,cAAA,KAAAE,SAAG,mBAAkB,WACrBF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACS,WAAW,YAAYrE,SAAC,iBAAqB,mBAE5GF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACS,WAAW,SAASrE,SAAC,cAAkB,sCAElFyC,KAAKC,MAAM2B,WAAY,KAC3CvE,cAAA,SAAMA,cAAA,YAGR6F,eAAA,QAAA3F,SAAA,CACEF,cAAA,KAAAE,SAAG,kBAAiB,WACpBF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACP,UAAW,YAAaZ,KAAKkB,gCAAkC3D,SAAC,iBAAqB,mBAEpJF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACP,UAAW,QAASZ,KAAKkB,gCAAkC3D,SAAC,aAAiB,qCAEzHyC,KAAKC,MAAMW,UAAW,KACzCvD,cAAA,SAAMA,cAAA,YAGR6F,eAAA,QAAA3F,SAAA,CACEF,cAAA,KAAAE,SAAG,kBAAiB,WACpBF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACL,UAAW,UAAWd,KAAKkB,gCAAkC3D,SAAC,eAAmB,mBAEhJF,cAACmG,IAAM,CAAC/F,MAAM,SAASC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACL,UAAW,kBAAmBd,KAAKkB,gCAAkC3D,SAAC,uBAA2B,mBAE/JF,cAACmG,IAAM,CAAC/F,MAAM,UAAUC,KAAK,KAAK+F,QAASA,KAAKzD,KAAKmB,SAAS,CAACL,UAAW,YAAad,KAAKkB,gCAAkC3D,SAAC,iBAAqB,qCAEjIyC,KAAKC,MAAMa,UAAW,KACzCzD,cAAA,SAAMA,cAAA,YAGRA,cAACqG,IAAI,CACHC,YAAY,EACZnD,KAAOR,KAAKC,MAAMuB,wBAClBoC,OAAS,CAACf,QAAOG,SAASa,MAAO,cAAeC,MAAO,CAACnD,KAAMX,KAAKC,MAAM2B,eAG3EvE,cAAA,SAAMA,cAAA,SAENA,cAACqG,IAAI,CACHC,YAAY,EACZnD,KAAOR,KAAKC,MAAMwB,yBAClBmC,OAAS,CAACf,QAAOG,SAAQa,MAAO,eAAgBC,MAAO,CAACnD,KAAMX,KAAKC,MAAM2B,eAG3EvE,cAAA,SAAMA,cAAA,SAENA,cAACqG,IAAI,CACHC,YAAY,EACZnD,KAAOR,KAAKC,MAAMqB,sBAClBsC,OAAS,CAACf,QAAOG,SAAQa,MAAO,uBAGlCxG,cAAA,SAAMA,cAAA,SAENA,cAACqG,IAAI,CACHC,YAAY,EACZnD,KAAOR,KAAKC,MAAMsB,uBAClBqC,OAAS,CAACf,QAAOG,SAAQa,MAAO,8BAO/BxG,cAACD,IAAO,GAErB,EAGamC,W","file":"static/js/36.8f50055e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { CSpinner } from '@coreui/react';\r\n\r\nconst Loading = () =>\r\n    <div className=\"animated fadeIn pt-3 text-center\">\r\n        <CSpinner color=\"success\" size=\"sm\"/>\r\n    </div>\r\n    ;\r\nexport default Loading;","function _extends() {\n  return module.exports = _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _extends.apply(null, arguments);\n}\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _taggedTemplateLiteral(e, t) {\n  return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {\n    raw: {\n      value: Object.freeze(t)\n    }\n  }));\n}\nexport { _taggedTemplateLiteral as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import React, { Component } from 'react';\r\nimport Plot from 'react-plotly.js';\r\nimport Select from 'react-select';\r\nimport { Button } from 'reactstrap';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport Loading from '../../Loading';\r\n/*\r\n\r\n# CORONA DATA UPDATION SCRIPT\r\n# https://github.com/owid/covid-19-data/blob/master/public/data/owid-covid-data.json\r\n\r\nwget https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.json\r\n\r\nmv owid-covid-data.json corona_full_data.json\r\n\r\nmv corona_full_data.json /usr/lib/tomcat/apache-tomcat-8.5.35/webapps/assets/json/\r\n\r\necho \"updated corona data on -  $(date)\" > corona_update.json\r\n\r\n\r\n\r\n\r\n*/\r\n\r\nconst FILE_NAME = \"CoronaGraph.js\";\r\n\r\nconst CORONA_DATA_API = \"http://192.168.1.109/assets/json/corona_full_data.json\";\r\nconst LOCATION_API = \"http://192.168.1.109/assets/json/all_countries_iso.json\";\r\n\r\n// const CORONA_DATA_API = \"http://localhost:3000/assets/json/corona_full_data.json\";\r\n// const LOCATION_API = \"http://localhost:3000/assets/json/all_countries_iso.json\";\r\n\r\nconst types_of_data = [\r\n  \"new_cases\",\r\n  \"new_deaths\",\r\n  \"total_cases\",\r\n  \"total_deaths\"\r\n];\r\n\r\nconst graphScales = [ \"log\" , \"linear\" ];\r\nconst graphTypes  = [ \"scatter\" , \"bar\" ];\r\nconst graphModes  = [ \"lines\" , \"lines+markers\" , \"markers\" ];\r\n\r\nconst COLORS = [\r\n  \"red\",\"green\",\"blue\",\"#b59a14\",\"#b514a5\",\"black\",\"orange\"\r\n];\r\n\r\n\r\nclass CoronaGraph extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n        isLocationDataLoaded: false,\r\n        isCoronaDataLoaded: false,\r\n        isLoaded: false,\r\n        graphScale: graphScales[1],\r\n        graphType: graphTypes[0],\r\n        graphMode: graphModes[1],\r\n        countriesData: [],\r\n        rawData: [],\r\n        selectedCountries: [],\r\n        dataForPlot_new_cases: {},\r\n        dataForPlot_new_deaths: {},\r\n        dataForPlot_total_cases: {},\r\n        dataForPlot_total_deaths: {}\r\n    };\r\n  }\r\n\r\n  componentDidMount(){\r\n      fetch(LOCATION_API)\r\n      .then(res => res.json())\r\n      .then(\r\n          (result) => {\r\n              //console.table(result);\r\n\r\n              let countriesData = [];\r\n              result.forEach( (country , i) => {\r\n                countriesData.push({value: country[\"alpha-3\"], label: country.name , ...country});\r\n              });\r\n              this.setState({\r\n                countriesData,\r\n                isLocationDataLoaded: true\r\n              });\r\n          },\r\n          (error) => {\r\n            console.log(\"ERROR :\" ,error);\r\n          }\r\n      );\r\n\r\n      fetch(CORONA_DATA_API)\r\n      .then(res => res.json())\r\n      .then(\r\n          (result) => {\r\n              //console.table(result);\r\n              this.setState({\r\n                rawData: result,\r\n                isCoronaDataLoaded: true\r\n              });\r\n          },\r\n          (error) => {\r\n            console.log(\"ERROR :\" ,error);\r\n          }\r\n      );\r\n  }\r\n\r\n  cleanDataForPlotting = (type_of_data) => {\r\n    let plotDatas = [];\r\n    let count = 0;\r\n\r\n    this.state.selectedCountries.forEach(selectedCountry => {\r\n      let x = [] , y = [];\r\n\r\n      const selectedCountryData = this.state.rawData[selectedCountry.value];\r\n      selectedCountryData.data.forEach(data => {\r\n        x.push(data.date);\r\n        y.push(data[type_of_data])\r\n      });\r\n\r\n      plotDatas.push(\r\n        {\r\n          x: [ ...x ],\r\n          y: [ ...y ],\r\n          type:this.state.graphType,\r\n          mode: this.state.graphMode,\r\n          marker: {color: COLORS[++count]},\r\n          name: `${selectedCountry.name} - ${type_of_data}`\r\n        }\r\n      );\r\n\r\n    });\r\n    \r\n    return plotDatas;\r\n  }\r\n\r\n  plotDataForSelectedCountries = () => {\r\n    if(this.state.selectedCountries.length == 0)\r\n      return;\r\n\r\n    this.setState({isLoaded:false});\r\n    setTimeout(()=>{\r\n      this.setState({\r\n        dataForPlot_new_cases: this.cleanDataForPlotting(types_of_data[0]),\r\n        dataForPlot_new_deaths: this.cleanDataForPlotting(types_of_data[1]),\r\n        dataForPlot_total_cases: this.cleanDataForPlotting(types_of_data[2]),\r\n        dataForPlot_total_deaths: this.cleanDataForPlotting(types_of_data[3]),\r\n        isLoaded: true\r\n      });\r\n    },250);\r\n    \r\n  }\r\n\r\n  render() {\r\n    console.log( FILE_NAME + \" render() : this.state :\" ,this.state);\r\n    const width = window.innerWidth * 0.94;\r\n    const height = window.innerHeight * 0.94;\r\n\r\n    return (\r\n      (this.state.isLocationDataLoaded && this.state.isCoronaDataLoaded) ? \r\n      <div>\r\n        <h1>Corona Graph Page</h1>\r\n        <br />\r\n\r\n        SELECT THE COUNTRIES : (or even a single one )\r\n        <Select\r\n          isMulti={true}\r\n          isClearable={true}\r\n          onChange={(e) =>{this.setState({selectedCountries : e});}} \r\n          options={this.state.countriesData}\r\n        />\r\n        <br />\r\n        <Button color=\"success\" size=\"lg\" onClick={this.plotDataForSelectedCountries}>Plot Data on Graph</Button>\r\n        <br /><br />\r\n\r\n        {\r\n          this.state.isLoaded &&\r\n          (<div>\r\n            <span>\r\n              <b>Change Scale :</b>&nbsp;&nbsp;\r\n              <Button color=\"primary\" size=\"lg\" onClick={()=>{this.setState({graphScale:\"linear\"})}}>LINEAR SCALE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              <Button color=\"warning\" size=\"lg\" onClick={()=>{this.setState({graphScale:\"log\"})}}>LOG SCALE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              CURRENT Scale : [ { this.state.graphScale } ]\r\n              <br /><br />\r\n            </span>\r\n\r\n            <span>\r\n              <b>Change Type :</b>&nbsp;&nbsp;\r\n              <Button color=\"primary\" size=\"lg\" onClick={()=>{this.setState({graphType: \"scatter\"}); this.plotDataForSelectedCountries(); }}>scatter TYPE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              <Button color=\"warning\" size=\"lg\" onClick={()=>{this.setState({graphType: \"bar\"}); this.plotDataForSelectedCountries(); }}>bar TYPE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              CURRENT Type : [ { this.state.graphType } ]\r\n              <br /><br />\r\n            </span>\r\n\r\n            <span>\r\n              <b>Change Mode :</b>&nbsp;&nbsp;\r\n              <Button color=\"primary\" size=\"lg\" onClick={()=>{this.setState({graphMode: \"lines\"}); this.plotDataForSelectedCountries(); }}>lines MODE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              <Button color=\"danger\" size=\"lg\" onClick={()=>{this.setState({graphMode: \"lines+markers\"}); this.plotDataForSelectedCountries(); }}>lines+markers MODE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              <Button color=\"warning\" size=\"lg\" onClick={()=>{this.setState({graphMode: \"markers\"}); this.plotDataForSelectedCountries(); }}>markers MODE</Button>\r\n              &nbsp;&nbsp;&nbsp;&nbsp;\r\n              CURRENT Mode : [ { this.state.graphMode } ]\r\n              <br /><br />\r\n            </span>\r\n\r\n            <Plot\r\n              showlegend={false}\r\n              data={ this.state.dataForPlot_total_cases }\r\n              layout={ {width, height , title: 'Total cases', yaxis: {type: this.state.graphScale }} }\r\n            />\r\n\r\n            <br /><hr />\r\n\r\n            <Plot\r\n              showlegend={false}\r\n              data={ this.state.dataForPlot_total_deaths }\r\n              layout={ {width, height, title: 'Total Deaths', yaxis: {type: this.state.graphScale }} }\r\n            />\r\n\r\n            <br /><hr />\r\n\r\n            <Plot\r\n              showlegend={false}\r\n              data={ this.state.dataForPlot_new_cases }\r\n              layout={ {width, height, title: 'New cases - Daily' } }\r\n            />\r\n\r\n            <br /><hr />\r\n\r\n            <Plot\r\n              showlegend={false}\r\n              data={ this.state.dataForPlot_new_deaths }\r\n              layout={ {width, height, title: 'New Deaths - Daily' } }\r\n            />\r\n            \r\n            \r\n          </div> )\r\n        }\r\n\r\n      </div> : <Loading />\r\n    );\r\n  }\r\n}\r\n\r\nexport default CoronaGraph;\r\n"],"sourceRoot":""}